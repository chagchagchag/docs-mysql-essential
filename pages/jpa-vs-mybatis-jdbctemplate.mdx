## JPA vs Mybatis, JdbcTemplate
굉장히 뜨거운 논쟁이고 `Mybatis 가 좋냐 JPA가 좋냐`이런 질문을 하는 분들은 대부분 본인이 원하는 답이 나오기를 원하고 질문하는 경우가 많아 답답한 적도 많고 진이 빠진 적이 많은 것 같습니다.<br/>

개인적으로는 JPA, Querydsl, Mybatis, JdbcTemplate 모두 개발에서 잘 사용해왔고, 어느 것 하나에 우위에 있다고 하거나 특히 선호하지는 않습니다. 물론 Mybatis 를 사용한적이 오래되서 조금 피하는 면이 있지만 업무에서 사용할 경우 Mybatis 역시 모듈화를 잘 해두면 테스트가 잘 되는 구조로 만드는게 가능했고, 성능을 고려해서 JPA 기반의 고빈도 트래픽 Insert 로직을 JdbcTemplate 기반의 코드로 전환해본 경험도 있습니다.<br/>

JPA 를 사용한다고 해서 JPA 의 Write Behind 로 인해 성능이 개선되고 이런 이슈들이 있거나 이런 이론적인 이야기는 할수는 있겠지만, 최근 R2DBC 에서는 Write Behind가 적용되는 것도 아니고 그렇게 성능 상에 있어서 Write Behind 같은 개념들이 특장점이 크다고는 생각하지는 않습니다. 단순히 DBMS 클라이언트 레벨에서의 소소한 캐싱이 그렇게 큰 역할을 한다고 이야기하기에는 조금 아쉬운 면이 많습니다.<br/>

가장 중요한 것은 DBMS 의 특성을 이해해서 성능이 잘 나오도록 쿼리를 사용하고, DBMS 에 맞도록 서비스를 운영하는 것이 중요하다고 생각합니다.<br/>

저는 DBMS의 커버링 인덱스의 개념에 대해 아는지 모르는지에서 이런 관점이 바뀐다고도 생각하는 편입니다. 만약 같은 쿼리에 대해서 커버링 인덱스만 거쳐서 필수적인 PK를 가져온 뒤에 서브쿼리를 이용해서 필요한 로우만 타격해서 데이터를 가져올 경우 성능상에 이점이 있습니다. 이렇게 로직을 작성하는 것은 제품을 생각해서 개발하는 것이라고 생각합니다.<br/>

반면, 커버링인덱스의 개념이 적용되지 않은 채로 모든 컬럼을 함께 조회해온다면 소규모 개발 그룹이거나 어드민 서비스를 개발한다면 어느 정도는 인정이 되겠지만, 상용서비스 개발 시에 이렇게 한다면 백엔드 개발 스터디를 더 해야 하는 것이 아닐까 하는 생각이 있습니다.<br/>

이런 경우 JPQL 을 적절하게 활용해서 쿼리 최적화를 하거나, JdbcTemplate, Mybatis 를 적절하게 활용해서 배포 전에 쿼리 튜닝을 어느 정도 해서 배포를 하는 것도 중요한 습관이라고 생각합니다.<br/>
<br/>


