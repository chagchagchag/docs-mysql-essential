## 쿼리 캐시

쿼리 캐시는 WAL(Write Ahead Log)과는 다른 개념입니다. 쿼리 캐시는 MySQL 5.0 까지는 존재하는 기능이었지만, MySQL 8.0 부터는 Deprecated 되었습니다.<br/>

<br/>



## 참고

- [MySQL Query Cache 는 왜 사용되지 않을까?](https://medium.com/@wjdrnr6662/mysql-query-cache%EB%8A%94-%EC%99%9C-%EC%82%AC%EC%9A%A9%EB%90%98%EC%A7%80-%EC%95%8A%EC%9D%84%EA%B9%8C-55e44991b301)
- [MySQL 8.0: New Lock free, scalable WAL design](https://dev.mysql.com/blog-archive/mysql-8-0-new-lock-free-scalable-wal-design/)

<br/>



## 쿼리 캐시란 
쿼리캐시에 SQL 과 데이터를 매핑해서 가지고 있다가 똑같은 SQL이 왔을때 캐시에 보관해둔 결과물을 응답하도록 캐시에 SQL의 결과를 보관하고 있는 것을 의미합니다.<br/>

쿼리 캐시는 데이터를 캐시하기 때문에 테이블의 데이터가 변경되면 캐시의 데이터도 함께 업데이트해줘야 합니다. 이런 업데이트 작업으로 인해 락(`Lock`) 이슈가 있었고 이런 이슈는 이익보다는 단점도 크고 캐시 데이터 관리에 대한 비용(성능상의 단점)이 컸기에 8.0 이후로는 MySQL 에서 쿼리 캐시 기능은 폐기 되었습니다.<br/>

다른 데이터베이스에도 쿼리 캐시와 유사한 기능이 있습니다. 오라클에서도 쿼리캐시와 비슷한 기능을 `소프트 캐시` 라는 이름으로 제공하기는 하지만, MySQL 처럼 SQL에 대한  데이터 까지는 매핑하지는 않고 **실행 계획 까지만 캐싱**을 합니다. 즉, 오라클은 MySQL 과는 다르게 실행 계획까지만 제공한다는 점에서 MySQL과는 차이가 있습니다.<br/>




## MySQL 5.0 → MySQL 8.0
MySQL 5.0 까지는 쿼리 캐시 기능이 있었지만, MySQL 8.0 부터는 쿼리 캐시 기능이 폐기되었습니다.<br/>

테이블의 데이터가 변경되면, 쿼리캐시에도 똑같이 변경된 내용을 반영해야 하는데 이 과정에서 락과 같은 이슈가 있었고 쿼리 캐시로 인해 이점보다는 문제점이 크기에 8.0 이후로는 폐기되었습니다.<br/>



## 참고) 오라클 : 소프트파싱, 하드파싱
오라클에는 소프트파싱, 하드파싱이라는 개념이 있습니다.<br/>
소프트파싱, 하드 파싱의 개념은 아래와 같습니다.<br/>

소프트파싱
- 실행 계획을 캐시에서 찾아서 옵티마이저 과정 생략 후 실행단계로 넘어갑니다.
- 실행 계획 까지만 캐싱이 됩니다.
<br/>

하드 파싱
- 실행 계획을 캐시에서 찾지 못했을 경우 옵티마이저 과정을 거친 후 실행단계로 넘어갑니다.
<br/>



하지만 오라클은 5.0 대의 MySQL 처럼 모든 SQL과 매핑해서 데이터까지 캐싱하지는 않습니다. <br/>

> 물론 힌트나 설정으로 모든 SQL과 매핑해서 데이터까지 캐싱하는 것이 가능하기는 하지만  오라클에서 기본적으로 제공되는 기능은 아닙니다.<br/>

