(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[821],{8846:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/transaction/transaction-isolation-level",function(){return a(6179)}])},6179:function(e,t,a){"use strict";a.r(t),a.d(t,{__toc:function(){return h},default:function(){return x}});var n=a(5893),i=a(2673),d=a(373),s=a(8426);a(9128);var r=a(2643),o={src:"/docs-mysql-essential/_next/static/media/dirty-read.de2a8a31.png",height:961,width:1146,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAMAAAACh/xsAAAAS1BMVEX////+/v79/f38/Pz7+/z7+/v5+fn4+Pj3+Pj39/f29vb19fX19fTs6+vr6+vj4+LY2NfY19bQz83OzcvIx8W+vLmzsa6kop2QjYl3DfeFAAAAO0lEQVR42iXGyRGAMAwDQMmCGJv7pv9KyUz2tSCu7zEQhuO9u5oc0cRQpiIj1nPpI2WI2feNBDw8U9IPMykBkSN5bpQAAAAASUVORK5CYII=",blurWidth:8,blurHeight:7},l={src:"/docs-mysql-essential/_next/static/media/non-repeatable-read.1ca15ee7.png",height:806,width:1053,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAAOVBMVEX////+///+/v78/Pz7+/v6+vr5+fn4+Pj39/f29vb09PTy8vLx8fHKycfGxsSvrKemo5+joZyUko7SKOo2AAAAMElEQVR42gWACRZAMAxEv5loEHS5/2H7EP8aDyKOb/ZC3AUgaFe+VQ18Om1BZkTY3iDFAQ7hnS2rAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:6},c={src:"/docs-mysql-essential/_next/static/media/phantom-read.7f49af0c.png",height:806,width:1129,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAAP1BMVEX////+/v/+/v79/f38/Pz8/Pv7+/v6+vr5+fn4+Pj29vb19fX09PPw8PDv7+/e3t3d3durqKKhnpqgnpmUko+mRvEDAAAANklEQVR42hXISRaAIBAD0djENogy3/+sQK3qfRjK7D8M91VHy3uUsAuGV/ySRCjyCQc9yp3kAiU2ATg75cpIAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:6};let h=[{depth:2,value:"트랜잭션 격리수준",id:"트랜잭션-격리수준"},{depth:2,value:"Read Uncommitted",id:"read-uncommitted"},{depth:3,value:"Dirty Read 현상",id:"dirty-read-현상"},{depth:2,value:"Read Committed",id:"read-committed"},{depth:3,value:"Non Repeatable Read 현상",id:"non-repeatable-read-현상"},{depth:2,value:"Repeatable Read",id:"repeatable-read"},{depth:3,value:"Phantom Read",id:"phantom-read"},{depth:2,value:"Serializable",id:"serializable"}];function _createMdxContent(e){let t=Object.assign({h2:"h2",p:"p",ul:"ul",li:"li",code:"code",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",blockquote:"blockquote",h3:"h3",img:"img"},(0,r.a)(),e.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h2,{id:"트랜잭션-격리수준",children:"트랜잭션 격리수준"}),"\n",(0,n.jsxs)(t.p,{children:["트랜잭션의 격리성을 확보할 때 격리 수준을 4가지 단계로 제공할 수 있습니다. 격리수준이 낮은 수준에서 높은 수준으로 나열해보면 아래와 같습니다.",(0,n.jsx)("br",{})]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"Read Uncommitted"})," (커밋되지 않은 읽기) : Dirty Read, Non Repeatable Read, Phantom Read 발생"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"Read Committed"})," (커밋된 읽기) : Non Repeatable Read, Phantom Read 발생"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"Repeatable Read"})," (반복 가능한 읽기) : Phantom Read 발생"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"Serializable"})," (직렬화 가능) : 가장 엄격한 격리수준"]}),"\n"]}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(t.p,{children:"각각의 격리 수준에서 발생하는 나타나는 현상들을 정리하면 아래와 같습니다."}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{}),(0,n.jsx)(t.th,{children:"Dirty Read"}),(0,n.jsx)(t.th,{children:"Non Repeatable Read"}),(0,n.jsx)(t.th,{children:"Phantom Read"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Read Unommitted"}),(0,n.jsx)(t.td,{children:"발생"}),(0,n.jsx)(t.td,{children:"발생"}),(0,n.jsx)(t.td,{children:"발생"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Read Committed"}),(0,n.jsx)(t.td,{}),(0,n.jsx)(t.td,{children:"발생"}),(0,n.jsx)(t.td,{children:"발생"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Repeatable Read"}),(0,n.jsx)(t.td,{}),(0,n.jsx)(t.td,{}),(0,n.jsx)(t.td,{children:"발생"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Serializable Read"}),(0,n.jsx)(t.td,{}),(0,n.jsx)(t.td,{}),(0,n.jsx)(t.td,{})]})]})]}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsxs)(t.p,{children:["아래에서부터는 각각의 트랜잭션 격리수준과 발생할 수 있는 현상을 예를 들어 설명합니다.",(0,n.jsx)("br",{})]}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(t.h2,{id:"read-uncommitted",children:"Read Uncommitted"}),"\n",(0,n.jsxs)(t.blockquote,{children:["\n",(0,n.jsx)(t.p,{children:"Dirty Read 가 발생합니다."}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["커밋되지 않은 것이라도 읽어들일 수 있는 격리 수준입니다. 트랜잭션에서 커밋하지 않은 수정 중인 내용이 다른 트랜잭션에 의해 읽을 수 있는 격리수준으로 가장 낮은 수준의 격리 수준입니다. 만약 다른 트랜잭션으로부터 읽어들인 데이터가 커밋되지 않은 데이터인데 그 데이터가 롤백된다면 데이터의 정합성에 문제가 생깁니다.",(0,n.jsx)("br",{})]}),"\n",(0,n.jsx)(t.h3,{id:"dirty-read-현상",children:"Dirty Read 현상"}),"\n",(0,n.jsxs)(t.p,{children:["트랜잭션 t1 이 데이터를 수정하고 있고 커밋하지 않은 상황에서 트랜잭션 t2 가 t1이 커밋하지 않은 데이터를 읽어들일 수 있는 현상입니다. 만약 트랜잭션 t2가 Dirty Read 한 데이터를 사용하고 있는 중에 t1 이 수정 중인 데이터를 롤백한다면 데이터의 정합성에 문제가 생깁니다.",(0,n.jsx)("br",{})]}),"\n",(0,n.jsxs)(t.p,{children:["은행 송금을 예로 들면 Read Uncommitted 에서 발생할 수 있는 Dirty Read 현상은 아래와 같은 장애를 일으킬 수 있습니다.",(0,n.jsx)("br",{}),"\r\n",(0,n.jsx)(t.img,{placeholder:"blur",src:o})]}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(t.h2,{id:"read-committed",children:"Read Committed"}),"\n",(0,n.jsxs)(t.blockquote,{children:["\n",(0,n.jsx)(t.p,{children:"Non Repeatable Read 가 발생합니다."}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["다른 트랜잭션에서 커밋된 데이터를 읽어들일 수 있는 격리수준을 의미합니다. 커밋된 데이터를 읽어들이기에 롤백하지 못한 데이터를 읽게 되는 불상사는 없습니다. 하지만 다른 트랜잭션에서 수정 후 커밋을 한 데이터를 읽어들이기에 조회 작업 도중에 다른 트랜잭션에서 같은 데이터에 대한 수정본 커밋을 한다면 수정본이 읽히는 현상인 Non Repeatable Read 현상이 발생합니다.",(0,n.jsx)("br",{})]}),"\n",(0,n.jsx)(t.h3,{id:"non-repeatable-read-현상",children:"Non Repeatable Read 현상"}),"\n",(0,n.jsx)(t.p,{children:"은행 송금을 예로 들면 Read Committed 에서 발생할 수 있는 Non Repeatable Read 현상은 아래와 같은 상황이 발생합니다."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{placeholder:"blur",src:l})}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(t.h2,{id:"repeatable-read",children:"Repeatable Read"}),"\n",(0,n.jsxs)(t.blockquote,{children:["\n",(0,n.jsx)(t.p,{children:"Phantom Read 가 발생합니다."}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["Repeatable Read 격리 수준은 Read Committed 가 보장하지 못하는 수정/커밋 된 데이터에 대해 Repeatable Read 가 가능하도록 하는 격리 수준입니다. Repeatable Read 는 다른 트랜잭션에서 수정/커밋 했어도 한번 조회했던 데이터를 조회하면 그 데이터에 대해서는 같은 데이터가 조회됨을 보장합니다.",(0,n.jsx)("br",{})]}),"\n",(0,n.jsxs)(t.p,{children:["하지만 새롭게 추가된 데이터가 있을 경우에는 반복 조회 시에 같은 결과 값을 조회할 수 있음을 보장하지 못합니다.",(0,n.jsx)("br",{})]}),"\n",(0,n.jsxs)(t.p,{children:["이런 현상을 새롭게 추가된 한 행을 유령(Phantom) 으로 비유하는 Phantom Read 현상이라고 이야기합니다.",(0,n.jsx)("br",{})]}),"\n",(0,n.jsx)(t.h3,{id:"phantom-read",children:"Phantom Read"}),"\n",(0,n.jsx)(t.p,{children:"Repeatable Read 는 하나의 트랜잭션에서 데이터를 반복 조회할 때 다른 트랜잭션에서 수정/추가 한 데이터로 인해 새로 추가된(Phantom) 데이터가 보이는 현상을 의미합니다."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{placeholder:"blur",src:c})}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(t.h2,{id:"serializable",children:"Serializable"}),"\n",(0,n.jsx)(t.p,{children:"가장 엄격한 격리수준이지만, 동시성 성능이 급격히 저하될 가능성이 높습니다."}),"\n",(0,n.jsx)("br",{})]})}let m={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:t}=Object.assign({},(0,r.a)(),e.components);return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(_createMdxContent,{...e})}):_createMdxContent(e)},pageOpts:{filePath:"pages/transaction/transaction-isolation-level.mdx",route:"/transaction/transaction-isolation-level",timestamp:1708932813e3,pageMap:[{kind:"MdxPage",name:"about",route:"/about"},{kind:"MdxPage",name:"index",route:"/"},{kind:"MdxPage",name:"memory-disk-wal",route:"/memory-disk-wal"},{kind:"MdxPage",name:"mysql-architecture",route:"/mysql-architecture"},{kind:"MdxPage",name:"mysql-index",route:"/mysql-index"},{kind:"MdxPage",name:"normalization-denormalization",route:"/normalization-denormalization"},{kind:"MdxPage",name:"query-cache",route:"/query-cache"},{kind:"Folder",name:"transaction",route:"/transaction",children:[{kind:"MdxPage",name:"intro",route:"/transaction/intro"},{kind:"MdxPage",name:"transaction-be-careful",route:"/transaction/transaction-be-careful"},{kind:"MdxPage",name:"transaction-isolation-level",route:"/transaction/transaction-isolation-level"},{kind:"MdxPage",name:"transactional-annotation",route:"/transaction/transactional-annotation"},{kind:"MdxPage",name:"transactional-propagation-option",route:"/transaction/transactional-propagation-option"},{kind:"MdxPage",name:"what-is-acid",route:"/transaction/what-is-acid"},{kind:"MdxPage",name:"what-is-mvcc",route:"/transaction/what-is-mvcc"},{kind:"Meta",data:{intro:"소개","what-is-mvcc":"MVCC","what-is-acid":"트랜잭션의 기본 4원칙 (ACID)","transaction-isolation-level":"트랜잭션 격리수준","transaction-be-careful":"트랜잭션 사용시 주의점","transactional-annotation":"스프링의 @Transactional","transactional-propagation-option":"트랜잭션 전파 옵션"}}]},{kind:"MdxPage",name:"uuid-vs-auto-increment",route:"/uuid-vs-auto-increment"},{kind:"Folder",name:"when-you-choose-dbms",route:"/when-you-choose-dbms",children:[{kind:"MdxPage",name:"sometimes-nosql-is-better-choice",route:"/when-you-choose-dbms/sometimes-nosql-is-better-choice"},{kind:"MdxPage",name:"when-you-choose-mysql-postgresql",route:"/when-you-choose-dbms/when-you-choose-mysql-postgresql"},{kind:"Meta",data:{"when-you-choose-mysql-postgresql":"MySQL, PostgreSQL 선택시 고려해볼 것들","sometimes-nosql-is-better-choice":"NoSQL이 더 좋은 선택일 경우 (feat. Subset 패턴)"}}]},{kind:"Meta",data:{index:"Introduction","mysql-index":"인덱스","normalization-denormalization":"정규화, 반정규화",transaction:"트랜잭션","mysql-architecture":"MySQL 구조","memory-disk-wal":"Memory vs Disk, WAL","query-cache":"쿼리 캐시","when-you-choose-dbms":"DBMS 별 선택이 필요할 때","uuid-vs-auto-increment":"UUID vs Auto Increment",about:{title:"About",type:"page"},contact:{title:"Contact ↗",type:"page",href:"-",newWindow:!0}}}],flexsearch:{codeblocks:!0},title:"Transaction Isolation Level",headings:h},pageNextRoute:"/transaction/transaction-isolation-level",nextraLayout:d.ZP,themeConfig:s.Z};var x=(0,i.j)(m)},8426:function(e,t,a){"use strict";var n=a(5893);a(7294);let i={logo:(0,n.jsx)("span",{children:"My Project"}),project:{link:"https://github.com/chagchagchag/docs-mysql-essential"},docsRepositoryBase:"https://github.com/chagchagchag/docs-mysql-essential",footer:{text:"Nextra Docs Template"}};t.Z=i},5789:function(){}},function(e){e.O(0,[774,796,888,179],function(){return e(e.s=8846)}),_N_E=e.O()}]);